{% extends "base.html" %}
{% load i18n thumbnail staticfiles isgif %}
{% block page_class %}Gallery{% endblock %}

{% block content %}
<h1>i'm from the internet.</h1>
  {% if pagination_list %}
  <div id="gallery" class="clearfix">
  {% for gallery_item in pagination_list %}

    {% if gallery_item.image %}
    <div class="gallery_item">
      <a target="_blank" href="{{ gallery_item.image.url }}"><img src="{{ gallery_item.image.avatar.url }}" /></a>
      <div class="imagetype">
        <ul>
        {% if gallery_item.image|isgif %}
          {% if user.userprofile.nightmode %}
          <li><img src="{% static 'gif_nightmode_c.png' %}" /></li>
          {% else %}
          <li><img src="{% static 'gif_c.png' %}" /></li>
          {% endif %}
        {% endif %}
        </ul>
      </div>
    </div>
    {% endif %}

    {% for comment in gallery_item.comment_set.all %}
      {% if comment.image %}
      <div class="gallery_item">
        <a target="_blank" href="{{ comment.image.url }}"><img src="{{ comment.image.avatar.url }}" /></a>
        <div class="imagetype">
          <ul>
          {% if comment.image|isgif %}
            {% if user.userprofile.nightmode %}
            <li><img src="{% static 'gif_nightmode_c.png' %}" /></li>
            {% else %}
            <li><img src="{% static 'gif_c.png' %}" /></li>
            {% endif %}
          {% endif %}
          </ul>
        </div>
      </div>
      {% endif %}
    {% endfor %}

  {% endfor %}
  </div>
  {% else %}
  <p>No images are available.</p>
  {% endif %}
{% endblock %}